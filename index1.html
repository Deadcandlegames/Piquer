<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <link rel="stylesheet" href="style.css">
  <script src="script.js" defer></script>
  <title>Piquer</title>
</head>
<body>
  <div class="table" role="application" aria-label="Card game table">

    <div class="controls">
      <button class="btn" id="resetBtn">Reset Game</button>
      <button class="btn ghost" id="dealDemo">Deal demo</button>
    </div>

    <div class="player player-top" id="player-1">
      <h3>Player 2</h3>
      <div class="slot-title">Lower cards</div>
      <div class="lower-cards" id="p2-lowercards">
<!--Javascript will add cards here hopefully -->
      </div>
      <div class="slot-title">Hand</div>
      <div class="hand" id="p2-hand">
<!--Javascript will add cards here hopefully -->
      </div>
    </div>

    <div class="player player-left" id="player-3">
      <h3>Player 3</h3>
      <div class="slot-title">Lower cards</div>
      <div class="lower-cards" data-owner="p3-lowercards">
<!--Javascript will add cards here hopefully -->
      </div>
      <div class="slot-title">Hand</div>
      <div class="hand" id="p3-hand">
<!--Javascript will add cards here hopefully -->
      </div>
    </div>

    <div class="center-area" id="center">
      <div class="center-pile" id="centercards">
        <div class="label">Center pile</div>
        <div class="topcard" id="topcard">?</div>
        <div class="label">Deck: <span id="deckCount">24</span></div>
      </div>
    </div>

    <div class="player player-right" id="player-4">
      <h3>Player 4</h3>
      <div class="slot-title">Lower cards</div>
      <div class="lower-cards" id="p4-lowercards">
<!--Javascript will add cards here hopefully -->
      </div>
      <div class="slot-title">Hand</div>
      <div class="hand" id="p4-hand">
<!--Javascript will add cards here hopefully -->
      </div>
    </div>

    <div class="player player-bottom" id="player-0">
      <h3>You</h3>
      <div class="slot-title">Lower cards</div>
      <div class="lower-cards" id="p0-lowercards">
<!--Javascript will add cards here hopefully -->
      </div>
      <div class="slot-title">Hand</div>
      <div class="hand" data-owner="p0-hand">
<!--Javascript will add cards here hopefully -->
      </div>
    </div>

    <div class="footer-note">Quick UI mock â€” slots are placeholders you can populate with cards via JS.</div>
  </div>

  <script>
    // Optional: smooth scaling based on available viewport so the layout "snaps" to a usable size.
    // This adjusts --ui-scale (used by .table transform) to avoid overflow on tiny screens.
    (function enableAutoScale(){
      const root = document.documentElement;
      const tableEl = document.querySelector('.table');

      function computeScale(){
        // We want the table to fit comfortably within the viewport.
        // Estimate the table's natural width and compare to viewport width/height.
        const vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);
        const vh = Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0);

        // Use the computed style to read the intended table max-width/height
        const naturalMaxWidth = Math.min(1400, vw - 40); // mirrors CSS max-width and body padding
        const naturalHeight = Math.min(vh - 40, 980);

        // Rough bounding box: reduce scale if either dimension would exceed viewport
        const tableRect = tableEl.getBoundingClientRect();
        // If tableRect hasn't laid out yet, use a conservative scale based on vw/vh.
        let scaleW = 1, scaleH = 1;
        if (tableRect.width > 0) scaleW = (vw - 28) / tableRect.width;
        if (tableRect.height > 0) scaleH = (vh - 80) / tableRect.height;

        // Only scale down, never scale up beyond 1. Keep scale in [0.75, 1].
        let scale = Math.min(1, scaleW, scaleH);
        scale = Math.max(0.75, scale);
        root.style.setProperty('--ui-scale', String(scale));
      }

      // compute initially and on resize/orientation change
      computeScale();
      window.addEventListener('resize', computeScale, {passive:true});
      window.addEventListener('orientationchange', computeScale, {passive:true});
    })();
  </script>
</body>
</html>
